<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Navbar</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/bootstrap.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
    <style>
      .custom_navbar {
        background: linear-gradient(180deg, #0b4486, #2a2a86);
      }

      html[data-bs-theme="dark"] .navbar-nav .nav-link {
        color: white !important;
      }

      html[data-bs-theme="dark"] .navbar-nav .nav-link:hover,
      html[data-bs-theme="dark"] .navbar-nav .nav-link:focus {
        color: #ccc !important; /* lighter on hover/focus */
      }
    </style>
  </head>

  <body>
    <nav
      class="navbar navbar-expand-lg w-100 shadow-sm p-1"
      data-bs-theme="light"
      style="position: fixed; top: 0; z-index: 1000"
    >

      <div class="container-fluid">
        <label
          class="nb mt-1 align-middle text-dark-subtle"
          style="font-size: 16px"
        >
          <img
            src="{{ url_for('static', filename='images/cash-on-delivery.png') }}"
            height="40"
            width="40"
            class="me-1 align-middle"
            style="margin-top: -5px"
          />
          CASH / NON-CASH (Store Uploader)
        </label>

        <div class="collapse navbar-collapse" id="navbarColor02">
          <ul class="navbar-nav ms-auto me-3">
            <li class="nav-item">
              <a class="nav-link" href="/"><i class="bi bi-cloud-upload"></i> Uploader</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/dashboard"><i class="bi bi-kanban"></i> Dashboard</a>
            </li>
          </ul>

          <div class="d-flex align-items-center">
            <i
              class="bi bi-person-circle"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasRight"
              aria-controls="offcanvasRight"
              style="
                margin-top: 3px !important;
                font-size: 1.5rem;
                color: #335cf0;
                cursor: pointer;
              "
            ></i>
          </div>
        </div>
      </div>
    </nav>

    <div
      class="offcanvas offcanvas-end"
      tabindex="-1"
      id="offcanvasRight"
      aria-labelledby="offcanvasRightLabel"
    >
      <div
        class="offcanvas-header p-2 bg-light-subtle"
        style="border-bottom: 1px solid #eeeeee"
      >
        {% if picture %}
        <img
          src="{{ picture }}"
          alt="User Picture"
          class="img-fluid rounded-circle"
          style="width: 60px; height: 60px"
        />
        {% else %}
        <svg
          version="1.1"
          fill="#515151"
          id="Layer_1"
          x="0px"
          y="0px"
          width="60px"
          height="60px"
          viewBox="0 0 143.9 142.9"
          style="enable-background: new 0 0 143.9 142.9"
          focusable="false"
          xml:space="preserve"
        >
          <g id="icomoon-ignore"></g>
          <g>
            <path
              d="M72,0.9C33.2,0.9,1.4,32.7,1.4,71.5S33.2,142,72,142s70.5-31.7,70.5-70.5S110.8,0.9,72,0.9z M116.9,117.9c-2.3-13.9-30.6-26.3-45.1-26.3c-14.4,0-42.5,12.3-45.1,26c-11.2-11.4-20-29-20-46.2C6.7,36.5,37,6.2,72,6.2c34.9,0,65.3,30.3,65.3,65.3C137.2,88.8,128.2,106.5,116.9,117.9z"
            ></path>
          </g>
          <path
            d="M95.4,62.5c0,12.5-10.1,22.6-22.6,22.6s-22.6-10-22.6-22.6s10.1-22.6,22.6-22.6S95.4,50,95.4,62.5z"
          ></path>
        </svg>
        {% endif %}

        <span class="ms-2">
          <span class="text-dark-subtle" style="font-size: 20px"
            >{{ full_name }}</span
          >
          <br />
          <span class="text-dark-subtle" style="font-size: 13px"
            ><i class="bi bi-envelope me-2"></i>{{ email }}</span
          >
        </span>
        <button
          type="button"
          class="btn-close me-2 text-dark"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body">
        <div class="mb-3">
          <h6 class="text-uppercase text-secondary">
            <i class="bi bi-person-circle me-1"></i>Account Details
          </h6>
          <div class="ms-2">
            <!-- <p class="mb-1 text-muted"><i class="bi bi-envelope me-2"></i><strong>Email:</strong>
                        gilbert.laman@example.com</p> -->
            <p class="mb-1 text-muted">
              <i class="bi bi-person-badge me-2"></i><strong>Role:</strong> User
            </p>
            <p class="mb-1 text-muted">
              <i class="bi bi-check-circle me-2"></i><strong>Status:</strong>
              <span class="text-success">Active</span>
            </p>
            <p>
              <a href="/open_folder">Open Google Drive Folder</a>
            </p>
          </div>
        </div>

        <div class="mt-5 mb-5">
          <h6 class="text-uppercase text-secondary">
            <i class="bi bi-gear me-1"></i>Preferences
          </h6>
          <div class="ms-2">
            <p class="mb-1 text-muted">
              <i class="bi bi-sliders me-2"></i>Manage your settings and
              preferences here.
            </p>

            <div class="dropdown mb-3">
              <button
                class="btn btn-outline-secondary dropdown-toggle btn-sm"
                type="button"
                id="themeDropdown"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="bi bi-palette me-1"></i> Theme
              </button>
              <ul class="dropdown-menu" aria-labelledby="themeDropdown">
                <li>
                  <button class="dropdown-item" data-bs-theme-value="light">
                    <i class="bi bi-sun me-2"></i>Light
                  </button>
                </li>
                <li>
                  <button class="dropdown-item" data-bs-theme-value="dark">
                    <i class="bi bi-moon me-2"></i>Dark
                  </button>
                </li>
                <li>
                  <button class="dropdown-item" data-bs-theme-value="auto">
                    <i class="bi bi-circle-half me-2"></i>Auto
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div
        class="offcanvas-footer p-2 text-end bg-custom-light"
        style="border-top: 1px solid #eeeeee"
      >
        <a href="/logout" class="btn btn-pro-white btn-sm rounded-0"
          >Logout <i class="bi bi-power ms-2"></i
        ></a>
      </div>
      <div class="offcanvas-footer p-2 border-top">
        <span>
          <a class="navbar-brand p-0" href="#">
            <img
              src="{{ url_for('static', filename='images/cash-on-delivery.png') }}"
              height="30"
              class="me-2 d-inline float-start"
              style="margin-top: -5px"
            />
            CASH / NON-CASH
          </a>
        </span>
        <span class="text-muted float-end">Version 1.0.0</span>
      </div>
    </div>
  </body>

  <script>
    document.querySelectorAll("[data-bs-theme-value]").forEach((button) => {
      button.addEventListener("click", () => {
        const theme = button.getAttribute("data-bs-theme-value");
        document.documentElement.setAttribute("data-bs-theme", theme);
        localStorage.setItem("preferred-theme", theme);
      });
    });

    // Load saved theme
    const savedTheme = localStorage.getItem("preferred-theme");
    if (savedTheme) {
      document.documentElement.setAttribute("data-bs-theme", savedTheme);
    }
  </script>
</html>
